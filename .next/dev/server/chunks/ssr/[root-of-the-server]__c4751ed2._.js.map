{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnoldokoye/hotbat/src/lib/api/utils.ts"],"sourcesContent":["export async function simulateNetworkLatency(min = 80, max = 200) {\n  const delay = Math.floor(Math.random() * (max - min + 1)) + min;\n  return new Promise((resolve) => setTimeout(resolve, delay));\n}\n"],"names":[],"mappings":";;;;AAAO,eAAe,uBAAuB,MAAM,EAAE,EAAE,MAAM,GAAG;IAC9D,MAAM,QAAQ,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,CAAC,MAAM,MAAM,CAAC,KAAK;IAC5D,OAAO,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;AACtD"}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnoldokoye/hotbat/src/lib/api/fetchHrPicks.ts"],"sourcesContent":["import { simulateNetworkLatency } from \"./utils\";\n\nexport type HrPick = {\n  rank: number;\n  playerId: number;\n  playerName: string;\n  teamAbbrev: string;\n  hotbatScore: number;\n  pickScore: number;\n  reasons: string[];\n  parkName?: string;\n  parkHrFactor?: number;\n  hrPerPa?: number;\n  seasonHr?: number;\n};\n\nexport type HrPicksResponse = {\n  date: string;\n  picks: HrPick[];\n};\n\nfunction resolveBaseUrl(explicit?: string) {\n  if (explicit) return explicit;\n  if (typeof window !== \"undefined\" && window.location?.origin) {\n    return window.location.origin;\n  }\n  const envHost =\n    process.env.NEXT_PUBLIC_SITE_URL ||\n    process.env.VERCEL_URL ||\n    process.env.NEXTAUTH_URL;\n  if (envHost) {\n    return envHost.startsWith(\"http\") ? envHost : `https://${envHost}`;\n  }\n  const port = process.env.PORT || \"3000\";\n  return `http://127.0.0.1:${port}`;\n}\n\nexport async function fetchHrPicks(\n  date: string,\n  baseUrl?: string,\n): Promise<HrPicksResponse> {\n  await simulateNetworkLatency();\n\n  const url = new URL(\"/api/hr-picks\", resolveBaseUrl(baseUrl));\n  url.searchParams.set(\"date\", date);\n\n  const res = await fetch(url.toString(), { cache: \"no-store\" });\n  if (!res.ok) {\n    const body = await res.json().catch(() => null);\n    const message = body?.error ?? `Failed to fetch HR picks: ${res.status}`;\n    throw new Error(message);\n  }\n  return (await res.json()) as HrPicksResponse;\n}\n"],"names":[],"mappings":";;;;AAAA;;AAqBA,SAAS,eAAe,QAAiB;IACvC,IAAI,UAAU,OAAO;IACrB,IAAI,kDAAkB,eAAe,OAAO,QAAQ,EAAE;;IAGtD,MAAM,UACJ,QAAQ,GAAG,CAAC,oBAAoB,IAChC,QAAQ,GAAG,CAAC,UAAU,IACtB,QAAQ,GAAG,CAAC,YAAY;IAC1B,IAAI,SAAS;QACX,OAAO,QAAQ,UAAU,CAAC,UAAU,UAAU,CAAC,QAAQ,EAAE,SAAS;IACpE;IACA,MAAM,OAAO,QAAQ,GAAG,CAAC,IAAI,IAAI;IACjC,OAAO,CAAC,iBAAiB,EAAE,MAAM;AACnC;AAEO,eAAe,aACpB,IAAY,EACZ,OAAgB;IAEhB,MAAM,IAAA,oJAAsB;IAE5B,MAAM,MAAM,IAAI,IAAI,iBAAiB,eAAe;IACpD,IAAI,YAAY,CAAC,GAAG,CAAC,QAAQ;IAE7B,MAAM,MAAM,MAAM,MAAM,IAAI,QAAQ,IAAI;QAAE,OAAO;IAAW;IAC5D,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;QAC1C,MAAM,UAAU,MAAM,SAAS,CAAC,0BAA0B,EAAE,IAAI,MAAM,EAAE;QACxE,MAAM,IAAI,MAAM;IAClB;IACA,OAAQ,MAAM,IAAI,IAAI;AACxB"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnoldokoye/hotbat/src/app/picks/page.tsx"],"sourcesContent":["import { headers } from \"next/headers\";\nimport { fetchHrPicks } from \"@/lib/api/fetchHrPicks\";\n\ntype PicksPageProps =\n  | { searchParams?: { date?: string } }\n  | { searchParams?: Promise<{ date?: string }> };\n\nasync function fetchLatestDate(baseUrl?: string): Promise<string | null> {\n  try {\n    const url = new URL(\"/api/slates/latest\", baseUrl || \"http://127.0.0.1:3000\");\n    const res = await fetch(url.toString(), { cache: \"no-store\" });\n    if (!res.ok) return null;\n    const data = (await res.json()) as { latestDate: string | null };\n    return data.latestDate ?? null;\n  } catch {\n    return null;\n  }\n}\n\nexport default async function PicksPage({ searchParams }: PicksPageProps) {\n  const params =\n    searchParams && typeof (searchParams as Promise<unknown>).then === \"function\"\n      ? await (searchParams as Promise<{ date?: string }>)\n      : (searchParams as { date?: string } | undefined) ?? {};\n\n  const headersList = await headers();\n  const host = headersList.get(\"host\");\n  const protocol = headersList.get(\"x-forwarded-proto\") ?? \"http\";\n  const baseUrl = host ? `${protocol}://${host}` : undefined;\n\n  const latestDate = await fetchLatestDate(baseUrl);\n  const effectiveDate = params.date ?? latestDate ?? \"\";\n\n  let picksData;\n  try {\n    picksData = effectiveDate\n      ? await fetchHrPicks(effectiveDate, baseUrl)\n      : { date: \"\", picks: [] };\n  } catch (error) {\n    console.error(\"hr-picks page fetch error\", error);\n    picksData = { date: effectiveDate, picks: [] };\n  }\n\n  const hasPicks = picksData.picks.length > 0;\n\n  return (\n    <main className=\"mx-auto flex max-w-5xl flex-col gap-6 px-4 py-6\">\n      <header className=\"flex flex-col gap-2\">\n        <h1 className=\"text-2xl font-semibold text-slate-900 dark:text-slate-50\">HR Picks</h1>\n        <p className=\"text-sm text-slate-600 dark:text-slate-300\">\n          Ranked, explainable HR candidates for the selected slate.\n        </p>\n        <form className=\"flex flex-wrap items-center gap-3 text-sm\" method=\"get\">\n          <label className=\"flex items-center gap-2 text-slate-700 dark:text-slate-200\">\n            <span className=\"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400\">\n              Date\n            </span>\n            <input\n              type=\"date\"\n              name=\"date\"\n              defaultValue={effectiveDate || \"\"}\n              className=\"h-10 rounded-md border border-slate-200 bg-white px-3 text-sm text-slate-800 shadow-sm dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100\"\n            />\n          </label>\n          <button\n            type=\"submit\"\n            className=\"h-10 rounded-md bg-slate-900 px-3 text-sm font-medium text-white shadow-sm transition hover:bg-slate-800 dark:bg-slate-100 dark:text-slate-900 dark:hover:bg-slate-200\"\n          >\n            Load Picks\n          </button>\n          <span className=\"text-slate-500 dark:text-slate-400\">\n            {effectiveDate ? `Showing ${effectiveDate}` : \"No historical slates available yet.\"}\n          </span>\n        </form>\n      </header>\n\n      {!effectiveDate ? (\n        <div\n          data-testid=\"hr-picks-empty-latest\"\n          className=\"rounded-lg border border-slate-200 bg-white p-4 text-sm text-slate-600 shadow-sm dark:border-slate-700 dark:bg-slate-900 dark:text-slate-300\"\n        >\n          No historical slates available yet.\n        </div>\n      ) : hasPicks ? (\n        <section className=\"space-y-3\" data-testid=\"hr-picks-list\">\n          {picksData.picks.map((pick) => (\n            <article\n              key={pick.playerId}\n              data-testid={`hr-pick-${pick.rank}`}\n              className=\"rounded-lg border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-slate-100 text-sm font-semibold text-slate-700 dark:bg-slate-800 dark:text-slate-100\">\n                    #{pick.rank}\n                  </div>\n                  <div className=\"flex flex-col\">\n                    <p className=\"text-lg font-semibold text-slate-900 dark:text-slate-50\">\n                      {pick.playerName}\n                    </p>\n                    <p className=\"text-sm text-slate-600 dark:text-slate-300\">{pick.teamAbbrev}</p>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400\">\n                    Pick Score\n                  </p>\n                  <p className=\"text-2xl font-semibold text-slate-900 dark:text-slate-50\">\n                    {pick.pickScore.toFixed(1)}\n                  </p>\n                  <p className=\"text-xs text-slate-500 dark:text-slate-400\">\n                    HotBat {pick.hotbatScore.toFixed(1)}\n                  </p>\n                </div>\n              </div>\n              <ul className=\"mt-3 list-disc space-y-1 pl-5 text-sm text-slate-700 dark:text-slate-200\">\n                {pick.reasons.map((reason, idx) => (\n                  <li key={`${pick.playerId}-reason-${idx}`}>{reason}</li>\n                ))}\n              </ul>\n            </article>\n          ))}\n        </section>\n      ) : (\n        <div\n          data-testid=\"hr-picks-empty\"\n          className=\"rounded-lg border border-slate-200 bg-white p-4 text-sm text-slate-600 shadow-sm dark:border-slate-700 dark:bg-slate-900 dark:text-slate-300\"\n        >\n          No picks available for this date.\n        </div>\n      )}\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}