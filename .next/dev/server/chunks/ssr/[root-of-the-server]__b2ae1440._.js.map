{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnoldokoye/hotbat/src/features/team-dashboard/TeamHrDashboardPage.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const TeamHrDashboardPage = registerClientReference(\n    function() { throw new Error(\"Attempted to call TeamHrDashboardPage() from the server but TeamHrDashboardPage is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/features/team-dashboard/TeamHrDashboardPage.tsx <module evaluation>\",\n    \"TeamHrDashboardPage\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,qFACA","ignoreList":[0]}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnoldokoye/hotbat/src/features/team-dashboard/TeamHrDashboardPage.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const TeamHrDashboardPage = registerClientReference(\n    function() { throw new Error(\"Attempted to call TeamHrDashboardPage() from the server but TeamHrDashboardPage is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/features/team-dashboard/TeamHrDashboardPage.tsx\",\n    \"TeamHrDashboardPage\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,iEACA","ignoreList":[0]}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnoldokoye/hotbat/src/lib/api/utils.ts"],"sourcesContent":["export async function simulateNetworkLatency(min = 80, max = 200) {\n  const delay = Math.floor(Math.random() * (max - min + 1)) + min;\n  return new Promise((resolve) => setTimeout(resolve, delay));\n}\n"],"names":[],"mappings":";;;;AAAO,eAAe,uBAAuB,MAAM,EAAE,EAAE,MAAM,GAAG;IAC9D,MAAM,QAAQ,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,CAAC,MAAM,MAAM,CAAC,KAAK;IAC5D,OAAO,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;AACtD"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnoldokoye/hotbat/src/lib/api/teamDashboard.ts"],"sourcesContent":["import type {\n  GameRow,\n  PitcherRow,\n  TeamHrTimePoint,\n  TeamInfo,\n  TeamKeyMetric,\n  TeamSplitRow,\n  UpcomingGame,\n} from \"@/features/team-dashboard/mock/teamDashboardData\";\nimport { simulateNetworkLatency } from \"./utils\";\n\n// Types aligned with docs/Backend_API_Contracts.md\nexport type TeamDashboardResponse = {\n  teamInfo: {\n    id: number;\n    name: string;\n    abbrev: string;\n    league: string;\n    division: string;\n    logoUrl?: string;\n  };\n  keyMetrics: {\n    id: string;\n    label: string;\n    value: string;\n    comparisonText?: string;\n    trendDirection?: \"up\" | \"down\" | \"flat\";\n  }[];\n  hrTimeSeries: {\n    date: string;\n    hr: number;\n    xHr?: number;\n    avgEv?: number;\n    barrels?: number;\n  }[];\n  pitcherVulnerability: {\n    pitcherName: string;\n    pitcherTeam: string;\n    hrAllowed: number;\n    hrPer9: number;\n    avgEvAllowed?: number;\n    maxDistance?: number;\n  }[];\n  upcomingGames: {\n    gameId: number;\n    date: string;\n    opponentName: string;\n    opponentAbbrev: string;\n    parkName: string;\n    parkHrFactor?: number;\n    predictedHrMean?: number;\n    predictedHrStd?: number;\n    hotbatScore?: number;\n  }[];\n  splits: {\n    overview: { label: string; hrPerGame: number; leagueAvgHrPerGame?: number }[];\n    homeAway: { label: string; hrPerGame: number; leagueAvgHrPerGame?: number }[];\n    lhpRhp: { label: string; hrPerGame: number; leagueAvgHrPerGame?: number }[];\n    monthly: { label: string; hrPerGame: number; leagueAvgHrPerGame?: number }[];\n  };\n  games: {\n    id: number;\n    date: string;\n    opponent: string;\n    park: string;\n    result?: string;\n    hr: number;\n    xHr?: number;\n    hrDiff?: number;\n    opposingSp?: string;\n    opposingSpHr9?: number;\n  }[];\n};\n\nexport type TeamDashboardData = {\n  teamInfo: TeamInfo;\n  teamKeyMetrics: TeamKeyMetric[];\n  teamHrTimeSeries: TeamHrTimePoint[];\n  pitcherRows: PitcherRow[];\n  upcomingGames: UpcomingGame[];\n  splits: {\n    overview: TeamSplitRow[];\n    homeAway: TeamSplitRow[];\n    lhpRhp: TeamSplitRow[];\n    monthly: TeamSplitRow[];\n  };\n  gameRows: GameRow[];\n  filters: {\n    defaultSeason: string;\n    defaultSplit: string;\n    defaultPark: string;\n    defaultHomeAway: string;\n    defaultDateRange: string;\n    defaultPitcherHand: string;\n    defaultMinPa: number;\n  };\n};\n\nfunction resolveBaseUrl(explicit?: string) {\n  if (explicit) return explicit;\n  // When running in the browser, use the current origin.\n  if (typeof window !== \"undefined\" && window.location?.origin) {\n    return window.location.origin;\n  }\n\n  // On the server, fall back to env vars or a local dev URL.\n  const envHost =\n    process.env.NEXT_PUBLIC_SITE_URL ||\n    process.env.VERCEL_URL ||\n    process.env.NEXTAUTH_URL;\n  if (envHost) {\n    return envHost.startsWith(\"http\") ? envHost : `https://${envHost}`;\n  }\n  const port = process.env.PORT || \"3000\";\n  return `http://127.0.0.1:${port}`;\n}\n\nexport async function fetchTeamDashboard(params: {\n  teamId: number | string;\n  season?: number;\n  split?: string;\n  from?: string;\n  to?: string;\n  baseUrl?: string;\n}): Promise<TeamDashboardData> {\n  await simulateNetworkLatency();\n\n  const {\n    teamId,\n    season = 2024,\n    split = \"overall\",\n    from,\n    to,\n    baseUrl,\n  } = params;\n\n  const url = new URL(\"/api/team-dashboard\", resolveBaseUrl(baseUrl));\n  const teamIdString = String(teamId).trim();\n  if (/^\\d+$/.test(teamIdString)) {\n    url.searchParams.set(\"teamId\", teamIdString);\n  } else {\n    url.searchParams.set(\"team_id\", teamIdString);\n  }\n  if (season !== undefined) url.searchParams.set(\"season\", String(season));\n  if (split) url.searchParams.set(\"split\", split);\n  if (from) url.searchParams.set(\"from\", from);\n  if (to) url.searchParams.set(\"to\", to);\n\n  const res = await fetch(url.toString(), {\n    method: \"GET\",\n    cache: \"no-store\",\n  });\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(`Failed to fetch team dashboard: ${res.status} ${text}`);\n  }\n  const data = (await res.json()) as TeamDashboardResponse;\n\n  const teamLogoUrl =\n    data.teamInfo.logoUrl ??\n    (data.teamInfo.abbrev\n      ? `/team-logos/${data.teamInfo.abbrev.toLowerCase()}.svg`\n      : \"/team-logos/default.svg\");\n\n  const teamInfo: TeamInfo = {\n    teamId: data.teamInfo.abbrev || String(data.teamInfo.id),\n    teamName: data.teamInfo.name,\n    teamLogoUrl,\n    league: data.teamInfo.league,\n    division: data.teamInfo.division,\n  };\n\n  const teamKeyMetrics: TeamKeyMetric[] = (data.keyMetrics ?? []).map((metric) => ({\n    id: metric.id,\n    label: metric.label,\n    value: metric.value,\n    comparisonText: metric.comparisonText ?? \"\",\n    trendDirection: metric.trendDirection,\n    trendValue: undefined,\n  }));\n\n  const teamHrTimeSeries: TeamHrTimePoint[] = (data.hrTimeSeries ?? []).map((point) => ({\n    date: point.date ? point.date.slice(0, 10) : \"\",\n    hr: point.hr,\n    xHr: point.xHr ?? point.hr,\n    avgEv: point.avgEv ?? 0,\n    barrels: point.barrels ?? 0,\n  }));\n\n  const pitcherRows: PitcherRow[] = (data.pitcherVulnerability ?? []).map((row) => ({\n    pitcherName: row.pitcherName,\n    pitcherTeam: row.pitcherTeam,\n    hrAllowed: row.hrAllowed,\n    hrPer9: row.hrPer9,\n    avgEvAllowed: row.avgEvAllowed ?? 0,\n    maxDistance: row.maxDistance ?? 0,\n  }));\n\n  const upcomingGames: UpcomingGame[] = (data.upcomingGames ?? []).map((game) => {\n    const projectedMean = game.predictedHrMean ?? 0;\n    const std = game.predictedHrStd ?? 0;\n    const projectedHrMin = Math.max(0, projectedMean - std);\n    const projectedHrMax = Math.max(projectedHrMin, projectedMean + std);\n    const opponentLogo =\n      game.opponentAbbrev && game.opponentAbbrev.length > 0\n        ? `/team-logos/${game.opponentAbbrev.toLowerCase()}.svg`\n        : \"/team-logos/default.svg\";\n    return {\n      date: game.date ? game.date.slice(0, 10) : \"\",\n      opponentName: game.opponentName,\n      opponentLogoUrl: opponentLogo,\n      parkName: game.parkName,\n      parkHrFactor: game.parkHrFactor ?? 1,\n      projectedHrMin,\n      projectedHrMax,\n    };\n  });\n\n  const mapSplits = (rows: TeamDashboardResponse[\"splits\"][\"overview\"]): TeamSplitRow[] =>\n    rows?.map((row) => ({\n      label: row.label,\n      hrPerGame: row.hrPerGame,\n      leagueAvgHrPerGame: row.leagueAvgHrPerGame,\n    })) ?? [];\n\n  const splits = {\n    overview: mapSplits(data.splits?.overview ?? []),\n    homeAway: mapSplits(data.splits?.homeAway ?? []),\n    lhpRhp: mapSplits(data.splits?.lhpRhp ?? []),\n    monthly: mapSplits(data.splits?.monthly ?? []),\n  };\n\n  const gameRows: GameRow[] = (data.games ?? []).map((game) => ({\n    id: String(game.id),\n    date: game.date ? game.date.slice(0, 10) : \"\",\n    opponent: game.opponent,\n    park: game.park,\n    result: game.result ?? \"-\",\n    hr: game.hr,\n    xHr: game.xHr ?? 0,\n    hrDiff: game.hrDiff ?? 0,\n    opposingSp: game.opposingSp ?? \"â€”\",\n    opposingSpHr9: game.opposingSpHr9 ?? 0,\n  }));\n\n  return {\n    teamInfo,\n    teamKeyMetrics,\n    teamHrTimeSeries,\n    pitcherRows,\n    upcomingGames,\n    splits,\n    gameRows,\n    filters: {\n      defaultSeason: String(season ?? \"2024\"),\n      defaultSplit: \"Full Season\",\n      defaultPark: \"All Parks\",\n      defaultHomeAway: \"All Games\",\n      defaultDateRange: \"Last 30 days\",\n      defaultPitcherHand: \"All\",\n      defaultMinPa: 0,\n    },\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnoldokoye/hotbat/src/lib/csv/dailyLogs.ts"],"sourcesContent":["import fs from \"node:fs/promises\";\nimport path from \"node:path\";\n\nconst DAILY_LOGS_DIR = path.join(process.cwd(), \"data_sources\", \"NEW_DATA_SETS\", \"2020-25 DAILY LOGS\");\n\nexport async function discoverDailyLogsSeasons(): Promise<number[]> {\n  try {\n    const entries = await fs.readdir(DAILY_LOGS_DIR, { withFileTypes: true });\n    const seasons = entries\n      .filter((e) => e.isDirectory())\n      .map((e) => e.name.slice(0, 4))\n      .filter((s) => /^\\d{4}$/.test(s))\n      .map((s) => Number.parseInt(s, 10))\n      .filter((n) => Number.isFinite(n))\n      .sort((a, b) => a - b);\n    return Array.from(new Set(seasons));\n  } catch {\n    return [];\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,iBAAiB,4HAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,gBAAgB,iBAAiB;AAE1E,eAAe;IACpB,IAAI;QACF,MAAM,UAAU,MAAM,gJAAE,CAAC,OAAO,CAAC,gBAAgB;YAAE,eAAe;QAAK;QACvE,MAAM,UAAU,QACb,MAAM,CAAC,CAAC,IAAM,EAAE,WAAW,IAC3B,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,IAC3B,MAAM,CAAC,CAAC,IAAM,UAAU,IAAI,CAAC,IAC7B,GAAG,CAAC,CAAC,IAAM,OAAO,QAAQ,CAAC,GAAG,KAC9B,MAAM,CAAC,CAAC,IAAM,OAAO,QAAQ,CAAC,IAC9B,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI;QACtB,OAAO,MAAM,IAAI,CAAC,IAAI,IAAI;IAC5B,EAAE,OAAM;QACN,OAAO,EAAE;IACX;AACF"}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnoldokoye/hotbat/src/lib/csv/csv.ts"],"sourcesContent":["import fs from \"node:fs/promises\";\n\nexport function splitCsvLine(line: string): string[] {\n  const out: string[] = [];\n  let cur = \"\";\n  let inQuotes = false;\n\n  for (let i = 0; i < line.length; i += 1) {\n    const ch = line[i];\n\n    if (ch === '\"') {\n      if (inQuotes && line[i + 1] === '\"') {\n        cur += '\"';\n        i += 1;\n        continue;\n      }\n      inQuotes = !inQuotes;\n      continue;\n    }\n\n    if (ch === \",\" && !inQuotes) {\n      out.push(cur);\n      cur = \"\";\n      continue;\n    }\n\n    cur += ch;\n  }\n\n  out.push(cur);\n  return out;\n}\n\nexport function parseCsvText(text: string): { header: string[]; rows: string[][] } {\n  const stripped = text.replace(/^\\uFEFF/, \"\").trim();\n  if (!stripped) return { header: [], rows: [] };\n\n  const lines = stripped.split(/\\r?\\n/).filter(Boolean);\n  if (lines.length === 0) return { header: [], rows: [] };\n\n  const header = splitCsvLine(lines[0]).map((h) => h.trim());\n  const rows = lines.slice(1).map((line) => splitCsvLine(line).map((c) => c.trim()));\n  return { header, rows };\n}\n\nexport async function readCsvFile(filePath: string): Promise<{ header: string[]; rows: string[][]; mtimeMs: number }> {\n  const stat = await fs.stat(filePath);\n  const text = await fs.readFile(filePath, \"utf8\");\n  const { header, rows } = parseCsvText(text);\n  return { header, rows, mtimeMs: stat.mtimeMs };\n}\n\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,SAAS,aAAa,IAAY;IACvC,MAAM,MAAgB,EAAE;IACxB,IAAI,MAAM;IACV,IAAI,WAAW;IAEf,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,MAAM,EAAE,KAAK,EAAG;QACvC,MAAM,KAAK,IAAI,CAAC,EAAE;QAElB,IAAI,OAAO,KAAK;YACd,IAAI,YAAY,IAAI,CAAC,IAAI,EAAE,KAAK,KAAK;gBACnC,OAAO;gBACP,KAAK;gBACL;YACF;YACA,WAAW,CAAC;YACZ;QACF;QAEA,IAAI,OAAO,OAAO,CAAC,UAAU;YAC3B,IAAI,IAAI,CAAC;YACT,MAAM;YACN;QACF;QAEA,OAAO;IACT;IAEA,IAAI,IAAI,CAAC;IACT,OAAO;AACT;AAEO,SAAS,aAAa,IAAY;IACvC,MAAM,WAAW,KAAK,OAAO,CAAC,WAAW,IAAI,IAAI;IACjD,IAAI,CAAC,UAAU,OAAO;QAAE,QAAQ,EAAE;QAAE,MAAM,EAAE;IAAC;IAE7C,MAAM,QAAQ,SAAS,KAAK,CAAC,SAAS,MAAM,CAAC;IAC7C,IAAI,MAAM,MAAM,KAAK,GAAG,OAAO;QAAE,QAAQ,EAAE;QAAE,MAAM,EAAE;IAAC;IAEtD,MAAM,SAAS,aAAa,KAAK,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI;IACvD,MAAM,OAAO,MAAM,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,OAAS,aAAa,MAAM,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI;IAC9E,OAAO;QAAE;QAAQ;IAAK;AACxB;AAEO,eAAe,YAAY,QAAgB;IAChD,MAAM,OAAO,MAAM,gJAAE,CAAC,IAAI,CAAC;IAC3B,MAAM,OAAO,MAAM,gJAAE,CAAC,QAAQ,CAAC,UAAU;IACzC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,aAAa;IACtC,OAAO;QAAE;QAAQ;QAAM,SAAS,KAAK,OAAO;IAAC;AAC/C"}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnoldokoye/hotbat/src/lib/csv/dailyTeamStats.ts"],"sourcesContent":["import path from \"node:path\";\n\nimport { readCsvFile } from \"@/lib/csv/csv\";\n\nconst DAILY_LOGS_DIR = path.join(process.cwd(), \"data_sources\", \"NEW_DATA_SETS\", \"2020-25 DAILY LOGS\");\n\nexport type DailyTeamStatsRow = {\n  gid: string;\n  team_id: string;\n  opp: string;\n  vishome: \"h\" | \"v\" | \"\";\n  site: string;\n  date: string; // YYYYMMDD\n  b_hr: number;\n  b_pa: number;\n  win: number;\n  loss: number;\n  tie: number;\n};\n\nlet cache:\n  | {\n      season: number;\n      mtimeMs: number;\n      rows: DailyTeamStatsRow[];\n    }\n  | null = null;\n\nfunction asInt(value: string): number {\n  const n = Number.parseInt(value, 10);\n  return Number.isFinite(n) ? n : 0;\n}\n\nexport async function loadDailyTeamStats(season: number): Promise<DailyTeamStatsRow[]> {\n  const filePath = path.join(DAILY_LOGS_DIR, `${season}DAILY_LOGScsvs`, `${season}teamstats.csv`);\n  const { header, rows, mtimeMs } = await readCsvFile(filePath);\n\n  if (cache && cache.season === season && cache.mtimeMs === mtimeMs) return cache.rows;\n\n  const idx = new Map(header.map((h, i) => [h, i] as const));\n  const cell = (cols: string[], key: string) => {\n    const i = idx.get(key);\n    return i === undefined ? \"\" : (cols[i] ?? \"\");\n  };\n\n  const parsed: DailyTeamStatsRow[] = [];\n  for (const cols of rows) {\n    const stattype = cell(cols, \"stattype\").toLowerCase();\n    if (stattype && stattype !== \"value\") continue;\n\n    const gid = cell(cols, \"gid\");\n    const team_id = cell(cols, \"team\");\n    const opp = cell(cols, \"opp\");\n    const vishome = cell(cols, \"vishome\") as DailyTeamStatsRow[\"vishome\"];\n    const site = cell(cols, \"site\");\n    const date = cell(cols, \"date\");\n\n    if (!gid || !team_id || !date) continue;\n\n    parsed.push({\n      gid,\n      team_id,\n      opp,\n      vishome: vishome === \"h\" || vishome === \"v\" ? vishome : \"\",\n      site,\n      date,\n      b_hr: asInt(cell(cols, \"b_hr\")),\n      b_pa: asInt(cell(cols, \"b_pa\")),\n      win: asInt(cell(cols, \"win\")),\n      loss: asInt(cell(cols, \"loss\")),\n      tie: asInt(cell(cols, \"tie\")),\n    });\n  }\n\n  // Deterministic ordering.\n  parsed.sort((a, b) => {\n    if (a.date !== b.date) return a.date.localeCompare(b.date);\n    if (a.gid !== b.gid) return a.gid.localeCompare(b.gid);\n    return a.team_id.localeCompare(b.team_id);\n  });\n\n  cache = { season, mtimeMs, rows: parsed };\n  return parsed;\n}\n\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;AAEA,MAAM,iBAAiB,4HAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,gBAAgB,iBAAiB;AAgBjF,IAAI,QAMO;AAEX,SAAS,MAAM,KAAa;IAC1B,MAAM,IAAI,OAAO,QAAQ,CAAC,OAAO;IACjC,OAAO,OAAO,QAAQ,CAAC,KAAK,IAAI;AAClC;AAEO,eAAe,mBAAmB,MAAc;IACrD,MAAM,WAAW,4HAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,OAAO,cAAc,CAAC,EAAE,GAAG,OAAO,aAAa,CAAC;IAC9F,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,uIAAW,EAAC;IAEpD,IAAI,SAAS,MAAM,MAAM,KAAK,UAAU,MAAM,OAAO,KAAK,SAAS,OAAO,MAAM,IAAI;IAEpF,MAAM,MAAM,IAAI,IAAI,OAAO,GAAG,CAAC,CAAC,GAAG,IAAM;YAAC;YAAG;SAAE;IAC/C,MAAM,OAAO,CAAC,MAAgB;QAC5B,MAAM,IAAI,IAAI,GAAG,CAAC;QAClB,OAAO,MAAM,YAAY,KAAM,IAAI,CAAC,EAAE,IAAI;IAC5C;IAEA,MAAM,SAA8B,EAAE;IACtC,KAAK,MAAM,QAAQ,KAAM;QACvB,MAAM,WAAW,KAAK,MAAM,YAAY,WAAW;QACnD,IAAI,YAAY,aAAa,SAAS;QAEtC,MAAM,MAAM,KAAK,MAAM;QACvB,MAAM,UAAU,KAAK,MAAM;QAC3B,MAAM,MAAM,KAAK,MAAM;QACvB,MAAM,UAAU,KAAK,MAAM;QAC3B,MAAM,OAAO,KAAK,MAAM;QACxB,MAAM,OAAO,KAAK,MAAM;QAExB,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM;QAE/B,OAAO,IAAI,CAAC;YACV;YACA;YACA;YACA,SAAS,YAAY,OAAO,YAAY,MAAM,UAAU;YACxD;YACA;YACA,MAAM,MAAM,KAAK,MAAM;YACvB,MAAM,MAAM,KAAK,MAAM;YACvB,KAAK,MAAM,KAAK,MAAM;YACtB,MAAM,MAAM,KAAK,MAAM;YACvB,KAAK,MAAM,KAAK,MAAM;QACxB;IACF;IAEA,0BAA0B;IAC1B,OAAO,IAAI,CAAC,CAAC,GAAG;QACd,IAAI,EAAE,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI;QACzD,IAAI,EAAE,GAAG,KAAK,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,CAAC,aAAa,CAAC,EAAE,GAAG;QACrD,OAAO,EAAE,OAAO,CAAC,aAAa,CAAC,EAAE,OAAO;IAC1C;IAEA,QAAQ;QAAE;QAAQ;QAAS,MAAM;IAAO;IACxC,OAAO;AACT"}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnoldokoye/hotbat/src/app/team/page.tsx"],"sourcesContent":["import { TeamHrDashboardPage } from \"@/features/team-dashboard/TeamHrDashboardPage\";\nimport { fetchTeamDashboard } from \"@/lib/api/teamDashboard\";\nimport { discoverDailyLogsSeasons } from \"@/lib/csv/dailyLogs\";\nimport { loadDailyTeamStats } from \"@/lib/csv/dailyTeamStats\";\nimport { headers } from \"next/headers\";\nimport { redirect } from \"next/navigation\";\n\ntype TeamPageProps = {\n  searchParams: Promise<{\n    teamId?: string;\n    team_id?: string;\n    season?: string;\n    split?: string;\n    from?: string;\n    to?: string;\n  }>;\n};\n\nexport default async function TeamPage({ searchParams }: TeamPageProps) {\n  const params = await searchParams;\n  const headersList = await headers();\n  const host = headersList.get(\"host\");\n  const protocol = headersList.get(\"x-forwarded-proto\") ?? \"http\";\n  const baseUrl = host ? `${protocol}://${host}` : undefined;\n\n  const csvTeamId = params?.team_id?.trim() ?? \"\";\n  const defaultTeamId = 1;\n  const teamId =\n    params?.teamId && !Number.isNaN(Number(params.teamId))\n      ? Number(params.teamId)\n      : defaultTeamId;\n  const season =\n    params?.season && !Number.isNaN(Number(params.season))\n      ? Number(params.season)\n      : 2024;\n  const split = params?.split ?? \"overall\";\n\n  if (!csvTeamId && !params?.teamId) {\n    const backend = (process.env.HOTBAT_BACKEND ?? \"auto\").toLowerCase();\n    if (backend !== \"db\") {\n      const csvSeasons = await discoverDailyLogsSeasons();\n      const defaultSeason = csvSeasons.length ? csvSeasons[csvSeasons.length - 1] : season;\n      const rows = await loadDailyTeamStats(defaultSeason);\n      const firstGame = rows[0];\n      if (firstGame?.team_id) {\n        const nextParams = new URLSearchParams();\n        nextParams.set(\"team_id\", firstGame.team_id);\n        nextParams.set(\"season\", String(defaultSeason));\n        nextParams.set(\"split\", split);\n        redirect(`/team?${nextParams.toString()}`);\n      }\n    }\n  }\n\n  const data = csvTeamId\n    ? await fetchTeamDashboard({\n        teamId: csvTeamId,\n        split,\n        season,\n        from: params?.from,\n        to: params?.to,\n        baseUrl,\n      })\n    : await fetchTeamDashboard({\n        teamId,\n        split,\n        season,\n        from: params?.from,\n        to: params?.to,\n        baseUrl,\n      });\n  return <TeamHrDashboardPage initialData={data} />;\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;AAae,eAAe,SAAS,EAAE,YAAY,EAAiB;IACpE,MAAM,SAAS,MAAM;IACrB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,OAAO,YAAY,GAAG,CAAC;IAC7B,MAAM,WAAW,YAAY,GAAG,CAAC,wBAAwB;IACzD,MAAM,UAAU,OAAO,GAAG,SAAS,GAAG,EAAE,MAAM,GAAG;IAEjD,MAAM,YAAY,QAAQ,SAAS,UAAU;IAC7C,MAAM,gBAAgB;IACtB,MAAM,SACJ,QAAQ,UAAU,CAAC,OAAO,KAAK,CAAC,OAAO,OAAO,MAAM,KAChD,OAAO,OAAO,MAAM,IACpB;IACN,MAAM,SACJ,QAAQ,UAAU,CAAC,OAAO,KAAK,CAAC,OAAO,OAAO,MAAM,KAChD,OAAO,OAAO,MAAM,IACpB;IACN,MAAM,QAAQ,QAAQ,SAAS;IAE/B,IAAI,CAAC,aAAa,CAAC,QAAQ,QAAQ;QACjC,MAAM,UAAU,CAAC,QAAQ,GAAG,CAAC,cAAc,IAAI,MAAM,EAAE,WAAW;QAClE,IAAI,YAAY,MAAM;YACpB,MAAM,aAAa,MAAM,IAAA,0JAAwB;YACjD,MAAM,gBAAgB,WAAW,MAAM,GAAG,UAAU,CAAC,WAAW,MAAM,GAAG,EAAE,GAAG;YAC9E,MAAM,OAAO,MAAM,IAAA,yJAAkB,EAAC;YACtC,MAAM,YAAY,IAAI,CAAC,EAAE;YACzB,IAAI,WAAW,SAAS;gBACtB,MAAM,aAAa,IAAI;gBACvB,WAAW,GAAG,CAAC,WAAW,UAAU,OAAO;gBAC3C,WAAW,GAAG,CAAC,UAAU,OAAO;gBAChC,WAAW,GAAG,CAAC,SAAS;gBACxB,IAAA,iMAAQ,EAAC,CAAC,MAAM,EAAE,WAAW,QAAQ,IAAI;YAC3C;QACF;IACF;IAEA,MAAM,OAAO,YACT,MAAM,IAAA,wJAAkB,EAAC;QACvB,QAAQ;QACR;QACA;QACA,MAAM,QAAQ;QACd,IAAI,QAAQ;QACZ;IACF,KACA,MAAM,IAAA,wJAAkB,EAAC;QACvB;QACA;QACA;QACA,MAAM,QAAQ;QACd,IAAI,QAAQ;QACZ;IACF;IACJ,qBAAO,8OAAC,mLAAmB;QAAC,aAAa;;;;;;AAC3C"}}]
}